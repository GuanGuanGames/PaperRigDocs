# 编辑器面板使用教程（EditorUsage）

---

## 1. 总览

PaperRig 提供了一套专为 2D 骨骼动画设计的编辑器面板，涵盖图层绑定、顶点编辑、图层组控制器等核心功能。  
通过这些工具，你可以高效构建角色的图层控制系统，并在编辑器中实时预览动画效果，提升制作流程的可视化与交互性。

---

## 2. 打开方式

以下是打开编辑器面板的步骤：

1. 双击任意已生成的 **PaperRig Skeletal Mesh** 资源；
2. 在顶部工具栏中点击 `Editing Tools` 按钮，进入骨骼模型编辑器界面；
3. 在工具集列表中选择 **PaperRig**，以启用相关编辑功能。

---

## 3. 顶点编辑（Edit Vertex）

顶点编辑是构建角色图层形状与骨骼绑定关系的关键步骤。通过该功能，用户可以手动调整图层的几何形状。

---

### 3.1 选择图层

在编辑器面板中：

- 点击左侧图层列表，选中需要编辑的图层；
- 选中后，图层轮廓将在视图中高亮显示；
- 若未选中图层，则无法进行任何顶点操作。

---

### 3.2 编辑顶点形状

选中图层后，可使用以下操作编辑顶点：

- **移动顶点**：点击并拖动顶点以调整位置；
- **添加顶点**：在边缘线上双击，插入新顶点；
- **删除顶点**：选中顶点后按 `Delete` 键移除。

编辑完成后，图层形状将实时更新，并影响后续绑定与动画表现。

---

### 💡 提示

- 编辑过程中可使用 `Ctrl + Z` 撤销操作；
- 鼠标滚轮可缩放视图，便于精细调整；
- 你无法编辑图层边框的4个顶点，只能在其范围内增删；

## 4. 图层控制器（Edit Layer Control）

图层控制器用于管理图层的显示状态与动画关键帧，是连接动画系统与蓝图逻辑的核心工具。通过控制器，用户可以实现图层的动态切换与骨骼驱动，从而增强角色表现力。

---

### 4.1 面板概览

编辑器面板包含以下关键区域：

- **Controller Name**：控制器命名字段，用于标识当前控制器；
- **Operation**：编辑模式选择新增或编辑已经存在的；
- **Add Key / Remove Key**：用于在当前帧添加或移除关键帧；
- **Slider & Range**：用于设置控制器的数值范围与当前值；
- **图层列表**：显示所有可控图层，带有可见性图标（👁️）用于切换显示状态。

---

### 4.2 新增控制器

1. 设置 `Operation` 为New
2. 在 `Controller Name` 字段中输入控制器名称；

---

### 4.3 添加与编辑关键帧

- 移动时间轴至目标帧；
- 点击 `Add Key` 添加关键帧；
- 使用滑块或数值输入调整控制器值；
- 设置图层的可见性（点击👁️图标切换）；
- 若需移除关键帧，点击 `Remove Key`。
- 右键图层把图层添加到关键帧或移除关键帧

---

### 4.4 图层组控制器参数设置

- **Range**：定义控制器的数值范围（如 0~1）；
- **Slider**：用于实时预览控制器值对图层的影响；
- **Operation 模式**：决定编辑器当前的编辑模式新增或更改

---

### 4.5 图层组控制器用途说明

图层控制器支持以下功能：

- **动画驱动**：在动画序列中使用曲线控制图层状态，实现角色动态表现；
- **蓝图集成**：在运行时通过蓝图修改控制器值，实现交互逻辑（如换装、表情切换）；
- **可视化调试**：编辑器中实时预览控制器效果，便于调试与优化。

---

### 💡 使用建议

- 控制器命名应保持唯一，便于蓝图调用；
- 可结合多个控制器实现复杂图层组合动画；

### 🎯 图层组控制器用途说明

图层控制器的主要用途包括：

- **动画系统集成**：通过关键帧控制图层状态，实现复杂的 2D 动画；
- **蓝图逻辑驱动**：在运行时通过蓝图修改控制器状态，实现交互式表现（如角色受击变脸、装备切换等）。

图层组控制器是 PaperRig 系统中连接图层与行为逻辑的桥梁，建议合理命名并规划控制结构。

## 5. 常见问题（可选）

以下是使用过程中可能遇到的常见问题及解决方案，旨在帮助用户顺利操作：

### • 添加图层未生效

请尝试重新导入 PSD 文件并重新生成骨骼模型。  
操作步骤如下：
1. 在内容浏览器中右键点击已导入的 PSD 文件，选择“重新导入”；
2. 等待处理完成后，重新创建骨骼模型。

系统会根据图层名称自动识别 PSD 文件中的新增或删除图层，并同步更新模型内容。未发生变更的图层将被保留。

**注意**：
- 若图层的像素内容发生变化，需重新构建该图层的顶点信息；
- 被删除的图层也会从模型中移除。

---

### • 顶点无法编辑

请确认当前已在 `Edit Vertex` 工具中选中了一个图层。  
未选中图层时，无法进行顶点编辑操作。

---

### • 控制器不响应动画曲线

请检查控制器名称是否与动画曲线中的名称完全一致。  
若名称匹配但仍无响应，请确认是否已为该控制器分配关键帧。  
未分配关键帧将导致控制器无法驱动动画。